# 添加CMD_updata_app_param_1命令计划

## 1. 在commands.json中添加新命令

* 在智能设置命令分类中添加新命令
* 命令ID: 521 (0x209)
* 命令名称: "设备主动同步数据命令"
* 命令描述: "蓝牙连接后设备主动向APP同步数据，包含车辆状态、速度、充电状态等信息"

## 2. 在uart_protocol.py中添加命令映射

* 在COMMANDS字典中添加新命令的映射
* 确保命令ID正确设置为0x209

## 3. 在simulator.py中添加命令处理函数

* 添加`_handle_device_sync_data`方法来处理设备主动同步数据命令
* 实现模拟响应，包括：
  - 1B 车辆状态（ACC状态、P档与READY档、2KFA档位）
  - 2B 仪表速度（范围0~2000，单位：km/h，精度：0.1）
  - 1B 分流器状态
  - 1B 充电状态
  - 1B 充电功率
  - 1B 电池百分比
  - 1B SOC
  - 1B 智能开关2
* 按照协议格式构建响应数据

## 4. 重新打包应用程序

* 运行setup.py脚本重新打包
* 验证生成的exe文件能正常运行

## 实现步骤

1. 修改`data/commands.json`文件，添加新命令
2. 修改`protocol/uart_protocol.py`文件，添加命令映射
3. 修改`protocol/simulator.py`文件，添加命令处理函数
4. 运行setup.py脚本重新打包应用程序
5. 测试生成的exe文件